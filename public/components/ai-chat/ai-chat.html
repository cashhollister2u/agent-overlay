<!-- Markdown-it for better markdown parsing -->
<!-- <script src="https://cdn.jsdelivr.net/npm/markdown-it@14.0.0/dist/markdown-it.min.js"></script> -->

<!-- Highlight.js for code syntax highlighting -->
<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css"> -->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script> -->


<!-- ============================= -->
<!-- FLOATING CHATGPT-STYLE AI BAR -->
<!-- ============================= -->
 <div class="chat-container app-background" data-role="chatRoot">
  <div class="dialog-box" data-role="dialogBox">
    <div class="dialog-window" data-role="dialogWindow"></div>

    <div class="convo-box app-background" data-role="convoBox">
      <div class="convo-header app-font-family app-background">Conversations</div>
      <div class="convo-names app-background" data-role="convoNames"></div>
    </div>

    <input type="hidden" data-role="activeConvoId" value="" />
  </div>

  <div class="ai-bar app-background" data-role="aiBar">
    <!-- Conversation btn -->
    <button class="ai-icon-btn" type="button" data-action="toggleConvo">
      <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5"
        stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M5 4h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H9l-4 4v-4H5a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1z" />
        <path d="M8 8h8M8 11h5" />
      </svg>
    </button>

    <!-- Upload -->
    <button class="ai-icon-btn" type="button" title="Upload file" data-action="openFilePicker">
      <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
        <path
          d="M12 3v12m0-12l-4 4m4-4l4 4M4 15v3a3 3 0 003 3h10a3 3 0 003-3v-3"
          stroke="#555" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </button>

    <!-- Mic -->
    <button class="ai-icon-btn" type="button" title="Voice input" data-action="toggleMic">
      <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
        <path
          d="M15.7806 10.1963C16.1326 10.3011 16.3336 10.6714 16.2288 11.0234L16.1487 11.2725C15.3429 13.6262 13.2236 15.3697 10.6644 15.6299L10.6653 16.835H12.0833L12.2171 16.8486C12.5202 16.9106 12.7484 17.1786 12.7484 17.5C12.7484 17.8214 12.5202 18.0894 12.2171 18.1514L12.0833 18.165H7.91632C7.5492 18.1649 7.25128 17.8672 7.25128 17.5C7.25128 17.1328 7.5492 16.8351 7.91632 16.835H9.33527L9.33429 15.6299C6.775 15.3697 4.6558 13.6262 3.84992 11.2725L3.76984 11.0234L3.74445 10.8906C3.71751 10.5825 3.91011 10.2879 4.21808 10.1963C4.52615 10.1047 4.84769 10.2466 4.99347 10.5195L5.04523 10.6436L5.10871 10.8418C5.8047 12.8745 7.73211 14.335 9.99933 14.335C12.3396 14.3349 14.3179 12.7789 14.9534 10.6436L15.0052 10.5195C15.151 10.2466 15.4725 10.1046 15.7806 10.1963Z" />
      </svg>
    </button>

    <!-- File indicator -->
    <span class="ai-file-indicator" data-role="fileIndicator" style="display:none;">
      <span data-role="fileName"></span>
      <button class="remove-btn" type="button" data-action="removeFile">x</button>
    </span>

    <!-- Audio indicator -->
    <span class="ai-file-indicator" data-role="audioIndicator" style="display:none;">
      <span data-role="audioName">Audio</span>
      <button class="remove-btn" type="button" data-action="removeAudio">x</button>
    </span>

    <!-- Hidden inputs -->
    <div class="fileInputContainer">
      <input type="file" style="display:none;" data-role="fileInput" />
      <input type="file" style="display:none;" accept="audio/*" data-role="audioInput" />
    </div>

    <!-- Text input -->
    <textarea
      class="ai-input app-font-family app-font-color"
      data-role="textInput"
      placeholder="Start Typing…"
      rows="1"
    ></textarea>

    <!-- Send -->
    <button class="ai-send" type="button" data-action="send">➤</button>
  </div>
</div>